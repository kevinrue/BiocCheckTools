# BiocCheckTools
_Scripts to complement R CMD BiocCheck_

## Update

An alternative to the scripts below is my BiocCheck [fork](https://github.com/kevinrue/BiocCheck), in which I edited the code to display up to the first 6 lines offending the BiocCheck rules mentioned below. That fork can be installed as follows:

```
devtools::install_github("kevinrue/BiocCheck")
```

### Disclaimer

Note that at the moment (**Fri 4 Nov**), my fork is up to date with the Bioconductor-mirror [master](https://github.com/Bioconductor-mirror/BiocCheck/network) branch, which means I am using the latest code on the devel branch. However, if the original package gets updated without integrating my changes, I will need to merge the changes from the original branch into my fork to run the combination of the latest official code and my changes.

## Motivation

If you are familiar with any of the following messages when running `R CMD BiocCheck <dir>`:

```
* Checking formatting of DESCRIPTION, NAMESPACE, man pages, R source,
  and vignette source...
    * NOTE: Consider shorter lines; 1 lines (0%) are > 80 characters
      long.
    * NOTE: Consider 4 spaces instead of tabs; 4 lines (0%) contain tabs.
    * NOTE: Consider indenting lines with a multiple of 4 spaces; 1
      lines (0%) are not.
```

And you wish to rapidly find those problematic lines, then those scripts are for you.

## Overview

My typical usage is, assuming the _Bioconductor_ package folder is `path/to/TVTB`

```
cd /path/to
listRpackage.sh TVTB > TVTBcheckFiles.txt
4spacetabs.py TVTBcheckFiles.txt
line_chars.py TVTBcheckFiles.txt
```

The output would then look like this:

```
$4spacetabs.py TVTBcheckFiles.txt
TVTB/man/TVTBParam-class.Rd:58: The \code{TVTBparam} class stores recurrent parameters of the \code{TVTB}zzzzzzz
1 lines not indented by a multiple of 4 spaces detected
```
and
```
# line_chars.py TVTBcheckFiles.txt
TVTB/man/TVTBParam-class.Rd:58: The \code{TVTBparam} class stores recurrent parameters of the \code{TVTB}zzzzzzz
1 lines over 80 characters long
```

## Installation

Clone the repository and add the folder on your `$PATH`:

```
git clone git@github.com:kevinrue/BiocCheckTools.git
export PATH=$PATH:$(pwd)
```

## listRpackage.sh

### Purpose

List all files checked by `R CMD BioCheck` in a file.

### Usage

```
listRfiles.sh pkgdir
```

### Notes

The script prints the filenames in the `stdout`, which must be redirected to a file.

## 4spacetabs.py

### Purpose

Print the lines that are not indented with a multiple of 4 spaces. The useful bit here is that each line is displayed along with the corresponding filename and line number to rapidly find and correct it.

### Usage

```
4spacetabs.py [-h] [--root rootFolder] listFiles.txt
```

### Notes

* `listFiles.txt` is the file generated by the `listRfiles.sh` script above.
* `4spacetabs.py` must be called from the same directory as `listRfiles.sh` was called or with `--root` set to that same directory, as relative file paths are stored in `listFiles.txt`.

## 4spacetabs.py

### Purpose

Print the lines that are > 80 characters long. The useful bit here is that each line is displayed along with the corresponding filename and line number to rapidly find and correct it.

### Usage

```
line_chars.py [-h] [--root rootFolder] [--max N] listFiles.txt
```

### Notes

* `listFiles.txt` is the file generated by the `listRfiles.sh` script above.
* `4spacetabs.py` must be called from the same directory as `listRfiles.sh` was called or with `--root` set to that same directory, as relative file paths are stored in `listFiles.txt`.
